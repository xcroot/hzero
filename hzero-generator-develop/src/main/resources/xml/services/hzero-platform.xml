<?xml version="1.0" encoding="UTF-8"?>
<!--name：服务名，order：排序，description：描述-->
<service name="hzero-platform" order="1" description="平台服务">

    <excel name="hzero-menu-user-role-label" description="菜单/角色/标签数据" fileName="hzero-menu-user-role-label" schema="hzero_platform">
        <sheet name="iam-menu" version="saas" description="菜单SAAS版">
            <table name="iam_menu" description="菜单-saas">
                <sql>SELECT
                    id,
                    code,
                    name,
                    h_quick_index,
                    fd_level,
                    parent_id,
                    type,
                    sort,
                    is_default,
                    icon,
                    route,
                    h_custom_flag,
                    h_tenant_id,
                    h_level_path,
                    h_virtual_flag,
                    h_controller_type,
                    h_permission_type,
                    h_description,
                    h_enabled_flag,
                    category
                    FROM
                    iam_menu
                    WHERE
                    EXISTS (
                    SELECT
                    1
                    FROM
                    iam_menu
                    WHERE
                    (
                    CODE LIKE 'hzero.site.sys%'
                    OR CODE LIKE 'hzero.site.dev%'
                    OR CODE LIKE 'hzero.site.mdm%'
                    OR CODE LIKE 'hzero.sys%'
                    OR CODE LIKE 'hzero.organization%'
                    OR CODE LIKE 'hzero.dev%'
                    OR CODE LIKE 'hzero.mdm%'
                    OR CODE LIKE 'hzero.personality%'
                    )
                    AND t.h_level_path LIKE concat( h_level_path, '%' ))
                    AND t.h_tenant_id = 0
                    AND t.CODE NOT LIKE '%test%'
                    AND h_enabled_flag = 1
                    ORDER BY
                    t.h_level_path
                </sql>
                <id>id</id>
                <cited>id</cited>
                <unique>code,fd_level,h_tenant_id</unique>
                <lang>
                    <field>name</field>
                    <pkName>id</pkName>
                </lang>
                <reference>
                    <field>parent_id</field>
                    <tableName>iam_menu</tableName>
                    <columnName>id</columnName>
                </reference>
            </table>
        </sheet>
        <sheet name="iam-menu" version="op" description="菜单OP版">
            <table name="iam_menu" description="菜单-op">
                <sql>SELECT
                    id,
                    code,
                    name,
                    h_quick_index,
                    fd_level,
                    parent_id,
                    type,
                    sort,
                    is_default,
                    icon,
                    route,
                    h_custom_flag,
                    h_tenant_id,
                    h_level_path,
                    h_virtual_flag,
                    h_controller_type,
                    h_permission_type,
                    h_description,
                    h_enabled_flag,
                    category
                    FROM
                    iam_menu
                    WHERE
                    h_enabled_flag = 1
                    AND EXISTS (
                    SELECT
                    1
                    FROM
                    iam_menu
                    WHERE
                    ( CODE LIKE 'hzero.sys%' OR CODE LIKE 'hzero.organization%' OR CODE LIKE 'hzero.dev%' OR CODE LIKE
                    'hzero.mdm%' OR CODE LIKE 'hzero.personality%' )
                    AND t.h_level_path LIKE concat( h_level_path, '%' ))
                    AND t.h_tenant_id = 0
                    AND t.CODE NOT LIKE '%test%'
                    AND ( fd_level = 'organization' )
                    ORDER BY
                    t.h_level_path
                </sql>
                <id>id</id>
                <cited>id</cited>
                <unique>code,fd_level,h_tenant_id</unique>
                <lang>
                    <field>name</field>
                    <pkName>id</pkName>
                </lang>
                <reference>
                    <field>parent_id</field>
                    <tableName>iam_menu</tableName>
                    <columnName>id</columnName>
                </reference>
            </table>
        </sheet>
        <sheet name="iam-menu-permission" description="菜单权限">
            <table name="iam_menu_permission" description="菜单权限">
                <sql>SELECT
                    id,
                    menu_id,
                    permission_code
                    FROM
                    iam_menu_permission
                    WHERE
                    menu_id in (
                    SELECT
                    id
                    FROM
                    iam_menu
                    WHERE
                    (
                    CODE LIKE 'hzero.site.sys%'
                    OR CODE LIKE 'hzero.site.dev%'
                    OR CODE LIKE 'hzero.site.mdm%'
                    OR CODE LIKE 'hzero.sys%'
                    OR CODE LIKE 'hzero.organization%'
                    OR CODE LIKE 'hzero.dev%'
                    OR CODE LIKE 'hzero.mdm%'
                    OR CODE LIKE 'hzero.personality%'
                    )) AND permission_code REGEXP '^[^0-9]{3,}$'
                </sql>
                <id>id</id>
                <cited>id</cited>
                <unique>menu_id,permission_code</unique>
                <reference>
                    <field>menu_id</field>
                    <sheetName>iam-menu</sheetName>
                    <tableName>iam_menu</tableName>
                    <columnName>id</columnName>
                </reference>
            </table>
        </sheet>
        <sheet name="iam_menu_label" description="菜单标签数据">
            <table name="iam_label" description="标签表">
                <sql>
                    SELECT
                    id,
                    NAME,
                    type,
                    enabled_flag,
                    FD_LEVEL,
                    DESCRIPTION,
                    tag,
                    inherit_flag,
                    preset_flag,
                    visible_flag
                    FROM
                    iam_label
                    WHERE
                    enabled_flag = 1
                    AND type = 'MENU'
                    ORDER BY
                    id ASC
                </sql>
                <id>id</id>
                <cited>id</cited>
                <unique>
                    name,type
                </unique>
                <lang>
                    <field>description</field>
                    <pkName>id</pkName>
                </lang>
            </table>
            <table name="hiam_label_rel" description="标签关系表">
                <sql>
                    SELECT
                    label_rel_id,
                    data_type,
                    data_id,
                    label_id,
                    assign_type
                    FROM hiam_label_rel
                    WHERE data_type = 'MENU'
                </sql>
                <id>label_rel_id</id>
                <unique>data_type,data_id,label_id</unique>
                <reference>
                    <field>data_id</field>
                    <sheetName>iam-menu</sheetName>
                    <tableName>iam_menu</tableName>
                    <columnName>id</columnName>
                </reference>
                <reference>
                    <field>label_id</field>
                    <tableName>iam_label</tableName>
                    <columnName>id</columnName>
                </reference>
            </table>
        </sheet>

        <sheet name="hzero-iam-user" description="用户">
            <table name="iam_user" description="用户">
                <sql>SELECT
                    id,
                    login_name,
                    email,
                    organization_id,
                    HASH_PASSWORD,
                    real_name,
                    phone,
                    INTERNATIONAL_TEL_CODE,
                    image_url,
                    profile_photo,
                    LANGUAGE,
                    time_zone,
                    is_enabled,
                    is_locked,
                    is_ldap,
                    is_admin,
                    locked_until_at,
                    password_attempt,
                    user_type
                    FROM
                    iam_user
                    WHERE
                    organization_id = 0
                    AND login_name IN ('ANONYMOUS', 'admin')
                </sql>
                <id>id</id>
                <cited>id</cited>
                <unique>login_name</unique>
            </table>
            <table name="hiam_user_info" description="用户信息">
                <sql>SELECT
                    user_id,
                    company_name,
                    invitation_code,
                    employee_id,
                    text_id,
                    security_level_code,
                    start_date_active,
                    end_date_active,
                    user_source,
                    phone_check_flag,
                    email_check_flag,
                    password_reset_flag,
                    default_tenant_id,
                    locked_date,
                    date_format,
                    time_format,
                    birthday,
                    nickname,
                    gender,
                    country_id,
                    region_id,
                    address_detail
                    FROM
                    hiam_user_info
                    WHERE
                    user_id IN (
                    SELECT
                    id
                    FROM iam_user
                    WHERE
                    organization_id = 0
                    AND login_name IN ('ANONYMOUS', 'admin')
                    )
                </sql>
                <unique>user_id</unique>
                <type>
                    <field>start_date_active</field>
                    <type>DATE</type>
                </type>
                <type>
                    <field>end_date_active</field>
                    <type>DATE</type>
                </type>
                <type>
                    <field>locked_date</field>
                    <type>DATE</type>
                </type>
                <reference>
                    <field>user_id</field>
                    <tableName>iam_user</tableName>
                    <columnName>id</columnName>
                </reference>
            </table>
        </sheet>
        <sheet name="iam_role_permission" version="saas" description="角色">
            <table name="iam_role" description="角色">
                <sql>SELECT
                    id,
                    NAME,
                    CODE,
                    description,
                    fd_level,
                    h_tenant_id,
                    h_inherit_role_id,
                    h_parent_role_id,
                    h_parent_role_assign_level,
                    h_parent_role_assign_level_val,
                    is_enabled,
                    is_modified,
                    is_enable_forbidden,
                    is_built_in,
                    is_assignable,
                    h_level_path,
                    h_inherit_level_path,
                    created_by_tenant_id,
                    tpl_role_name
                    FROM
                    iam_role
                    WHERE
                    h_tenant_id = 0
                    AND is_enabled = 1
                    AND CODE IN ( 'role/site/default/administrator', 'role/organization/default/administrator', 'role/site/default/guest', 'role/organization/default/guest', 'role/organization/default/template/administrator' )
                    AND is_built_in=1
                    order by id asc
                </sql>
                <id>id</id>
                <cited>id</cited>
                <unique>
                    code,h_tenant_id,h_parent_role_id,h_parent_role_assign_level,created_by_tenant_id
                </unique>
                <lang>
                    <field>name</field>
                    <pkName>id</pkName>
                </lang>
                <lang>
                    <field>tpl_role_name</field>
                    <pkName>id</pkName>
                </lang>
                <reference>
                    <field>h_parent_role_id</field>
                    <tableName>iam_role</tableName>
                    <columnName>id</columnName>
                </reference>
            </table>
            <table name="iam_role_permission" description="角色权限">
                <sql>SELECT
                    id,
                    role_id,
                    permission_id,
                    h_create_flag,
                    h_inherit_flag,
                    type
                    FROM iam_role_permission
                    WHERE
                    type = 'PS' and
                    role_id in (
                    SELECT
                    id
                    FROM
                    iam_role
                    WHERE
                    h_tenant_id = 0
                    AND is_enabled = 1
                    AND CODE IN ( 'role/site/default/administrator', 'role/organization/default/administrator', 'role/organization/default/template/administrator' )
                    AND is_built_in=1
                    ) AND
                    permission_id in (
                    SELECT
                    id
                    FROM
                    iam_menu
                    WHERE
                    (
                    CODE LIKE 'hzero.site.sys%'
                    OR CODE LIKE 'hzero.site.dev%'
                    OR CODE LIKE 'hzero.site.mdm%'
                    OR CODE LIKE 'hzero.sys%'
                    OR CODE LIKE 'hzero.organization%'
                    OR CODE LIKE 'hzero.dev%'
                    OR CODE LIKE 'hzero.mdm%'
                    OR CODE LIKE 'hzero.personality%'
                    ))
                </sql>
                <id>id</id>
                <cited>id</cited>
                <unique>
                    role_id,permission_id,type
                </unique>
                <reference>
                    <field>role_id</field>
                    <tableName>iam_role</tableName>
                    <columnName>id</columnName>
                </reference>
                <reference>
                    <field>permission_id</field>
                    <sheetName>iam-menu</sheetName>
                    <tableName>iam_menu</tableName>
                    <columnName>id</columnName>
                </reference>
            </table>
        </sheet>
        <sheet name="iam_role_permission" version="op" description="角色">
            <table name="iam_role" description="角色">
                <sql>SELECT
                    id,
                    NAME,
                    CODE,
                    description,
                    fd_level,
                    h_tenant_id,
                    h_inherit_role_id,
                    h_parent_role_id,
                    h_parent_role_assign_level,
                    h_parent_role_assign_level_val,
                    is_enabled,
                    is_modified,
                    is_enable_forbidden,
                    is_built_in,
                    is_assignable,
                    h_level_path,
                    h_inherit_level_path,
                    created_by_tenant_id
                    FROM
                    iam_role
                    WHERE
                    h_tenant_id = 0
                    AND is_enabled = 1
                    AND CODE IN ( 'role/site/default/administrator', 'role/organization/default/administrator', 'role/site/default/guest', 'role/organization/default/guest', 'role/organization/default/template/administrator' )
                    AND fd_level !='site'
                    AND is_built_in=1
                    order by id asc
                </sql>
                <id>id</id>
                <cited>id</cited>
                <unique>
                    code,h_tenant_id,h_parent_role_id,h_parent_role_assign_level,created_by_tenant_id
                </unique>
                <lang>
                    <field>name</field>
                    <pkName>id</pkName>
                </lang>
                <reference>
                    <field>h_parent_role_id</field>
                    <tableName>iam_role</tableName>
                    <columnName>id</columnName>
                </reference>
            </table>
            <table name="iam_role_permission" description="角色权限">
                <sql>SELECT
                    id,
                    role_id,
                    permission_id,
                    h_create_flag,
                    h_inherit_flag,
                    type
                    FROM iam_role_permission
                    WHERE
                    type = 'PS' and
                    role_id in (
                    SELECT
                    id
                    FROM
                    iam_role
                    WHERE
                    h_tenant_id = 0
                    AND is_enabled = 1
                    AND CODE IN ( 'role/site/default/administrator', 'role/organization/default/administrator', 'role/organization/default/template/administrator' )
                    AND is_built_in=1
                    ) AND
                    permission_id in (
                    SELECT
                    id
                    FROM
                    iam_menu
                    WHERE
                    (CODE LIKE 'hzero.sys%'
                    OR CODE LIKE 'hzero.organization%'
                    OR CODE LIKE 'hzero.dev%'
                    OR CODE LIKE 'hzero.mdm%'
                    OR CODE LIKE 'hzero.personality%'
                    ))
                </sql>
                <id>id</id>
                <cited>id</cited>
                <unique>
                    role_id,permission_id,type
                </unique>
                <reference>
                    <field>role_id</field>
                    <tableName>iam_role</tableName>
                    <columnName>id</columnName>
                </reference>
                <reference>
                    <field>permission_id</field>
                    <sheetName>iam-menu</sheetName>
                    <tableName>iam_menu</tableName>
                    <columnName>id</columnName>
                </reference>
            </table>
        </sheet>
        <sheet name="hzero-iam-member-role" description="用户角色关系">
            <table name="iam_member_role" description="用户角色关系">
                <sql>SELECT
                    id,
                    role_id,
                    member_id,
                    member_type,
                    source_id,
                    source_type,
                    h_assign_level,
                    h_assign_level_value,
                    start_date_active,
                    end_date_active
                    FROM iam_member_role
                </sql>
                <id>id</id>
                <unique>role_id,member_id,member_type</unique>
                <reference>
                    <field>role_id</field>
                    <sheetName>iam_role_permission</sheetName>
                    <tableName>iam_role</tableName>
                    <columnName>id</columnName>
                </reference>
                <reference>
                    <field>member_id</field>
                    <sheetName>hzero-iam-user</sheetName>
                    <tableName>iam_user</tableName>
                    <columnName>id</columnName>
                </reference>
            </table>
        </sheet>
        <sheet name="iam_role_label" description="角色标签数据">
            <table name="iam_label" description="标签表">
                <sql>
                    SELECT
                    id,
                    NAME,
                    type,
                    enabled_flag,
                    FD_LEVEL,
                    DESCRIPTION,
                    tag,
                    inherit_flag,
                    preset_flag,
                    visible_flag
                    FROM
                    iam_label
                    WHERE
                    enabled_flag = 1
                    AND name in ("TENANT_ROLE_TPL","TENANT_ADMIN")
                    AND type = 'ROLE'
                    ORDER BY
                    id ASC
                </sql>
                <id>id</id>
                <cited>id</cited>
                <unique>name,type</unique>
                <lang>
                    <field>description</field>
                    <pkName>id</pkName>
                </lang>
            </table>
            <table name="hiam_label_rel" description="标签关系表">
                <sql>
                    SELECT
                    label_rel_id,
                    data_type,
                    data_id,
                    label_id,
                    assign_type
                    FROM hiam_label_rel
                    WHERE data_type = 'ROLE'
                </sql>
                <id>label_rel_id</id>
                <unique>data_type,data_id,label_id</unique>
                <reference>
                    <field>data_id</field>
                    <sheetName>iam_role_permission</sheetName>
                    <tableName>iam_role</tableName>
                    <columnName>id</columnName>
                </reference>
                <reference>
                    <field>label_id</field>
                    <tableName>iam_label</tableName>
                    <columnName>id</columnName>
                </reference>
            </table>
        </sheet>
        <sheet name="hzero-iam-doc-type" description="单据权限">
            <table name="hiam_doc_type_dimension" description="单据权限维度">
                <sql>
                    SELECT
                    dimension_id,
                    dimension_code,
                    dimension_name,
                    dimension_type,
                    value_source_type,
                    value_source,
                    enabled_flag,
                    order_seq,
                    tenant_id
                    FROM hiam_doc_type_dimension
                    WHERE tenant_id = 0
                    AND dimension_code IN ('COMPANY', 'PURORG', 'PURAGENT', 'LOV', 'LOV_VIEW', 'DATASOURCE', 'DATA_GROUP', 'CREATED_BY')
                    ORDER BY dimension_type, order_seq
                </sql>
                <id>dimension_id</id>
                <unique>dimension_code</unique>
            </table>
        </sheet>
        <sheet name="dashboard-card" description="卡片">
            <table name="hpfm_dashboard_card" description="平台卡片表">
                <sql>SELECT
                    id,
                    CODE,
                    fd_level,
                    catalog_type,
                    name,
                    description,
                    w,
                    h,
                    enabled_flag,
                    logo,
                    tenant_id,
                    card_params
                    FROM
                    hpfm_dashboard_card
                    WHERE
                    enabled_flag=1
                    and tenant_id=0
                    and code in ("HZERO_CommonlyUsed","HzeroMessage","ReportCard","Workflow")
                </sql>
                <id>id</id>
                <cited>id</cited>
                <unique>code,tenant_id</unique>
                <lang>
                    <field>name</field>
                    <pkName>id</pkName>
                </lang>
                <lang>
                    <field>description</field>
                    <pkName>id</pkName>
                </lang>
            </table>
            <table name="hpfm_dashboard_clause" description="工作台条目配置">
                <sql>SELECT
                    clause_id,
                    clause_code,
                    clause_name,
                    data_tenant_level,
                    menu_code,
                    route,
                    stats_expression,
                    doc_remark_expression,
                    enabled_flag,
                    remark,
                    tenant_id
                    FROM
                    hpfm_dashboard_clause
                    WHERE
                    enabled_flag=1
                    and tenant_id=0
                    and clause_code not like 'TEST%'
                </sql>
                <id>clause_id</id>
                <cited>clause_id</cited>
                <unique>clause_code,tenant_id</unique>
                <lang>
                    <field>clause_name</field>
                    <pkName>clause_id</pkName>
                </lang>
            </table>
            <table name="hpfm_dashboard_card_clause" description="卡片条目关系">
                <sql>SELECT
                    id,
                    card_id,
                    clause_id,
                    order_seq
                    FROM
                    hpfm_dashboard_card_clause
                    WHERE
                    card_id IN ( SELECT id FROM hpfm_dashboard_card WHERE enabled_flag = 1 AND tenant_id = 0 AND CODE in ("HZERO_CommonlyUsed","HzeroMessage","ReportCard","Workflow") )
                    AND clause_id IN (
                    SELECT
                    clause_id
                    FROM
                    hpfm_dashboard_clause
                    WHERE
                    enabled_flag = 1
                    AND tenant_id = 0
                    AND clause_code NOT LIKE 'TEST%')
                </sql>
                <id>id</id>
                <unique>card_id,clause_id</unique>
                <reference>
                    <field>card_id</field>
                    <tableName>hpfm_dashboard_card</tableName>
                    <columnName>id</columnName>
                </reference>
                <reference>
                    <field>clause_id</field>
                    <tableName>hpfm_dashboard_clause</tableName>
                    <columnName>clause_id</columnName>
                </reference>
            </table>
            <table name="hpfm_dashboard_layout" description="工作台配置">
                <sql>
                    SELECT
                    id,
                    CODE,
                    w,
                    h,
                    x,
                    y,
                    user_id,
                    role_id,
                    tenant_id,
                    card_id
                    FROM
                    hpfm_dashboard_layout
                    WHERE
                    user_id IN ( SELECT id FROM iam_user WHERE organization_id = 0 AND login_name IN ( 'ANONYMOUS', 'admin' ) )
                    AND role_id IN ( SELECT id FROM iam_role WHERE h_tenant_id = 0 AND is_enabled = 1 AND CODE IN ( 'role/site/default/administrator', 'role/organization/default/administrator', 'role/site/default/guest', 'role/organization/default/guest', 'role/organization/default/template/administrator' ) AND is_built_in = 1 )
                    AND tenant_id =0
                </sql>
                <id>id</id>
                <unique>code,card_id,user_id,role_id,tenant_id</unique>
                <reference>
                    <field>user_id</field>
                    <sheetName>hzero-iam-user</sheetName>
                    <tableName>iam_user</tableName>
                    <columnName>id</columnName>
                </reference>
                <reference>
                    <field>role_id</field>
                    <sheetName>iam_role_permission</sheetName>
                    <tableName>iam_role</tableName>
                    <columnName>id</columnName>
                </reference>
                <reference>
                    <field>card_id</field>
                    <tableName>hpfm_dashboard_card</tableName>
                    <columnName>id</columnName>
                </reference>
            </table>
            <table name="hpfm_dashboard_role_card" description="角色卡片表">
                <sql>
                    SELECT
                    id,
                    role_id,
                    card_id,
                    x,
                    y,
                    default_display_flag
                    FROM
                    hpfm_dashboard_role_card
                    WHERE
                    role_id IN ( SELECT id FROM iam_role WHERE h_tenant_id = 0 AND is_enabled = 1 AND CODE IN ( 'role/site/default/administrator', 'role/organization/default/administrator', 'role/site/default/guest', 'role/organization/default/guest', 'role/organization/default/template/administrator' ) AND is_built_in = 1 )
                    AND card_id IN (
                    SELECT
                    id
                    FROM
                    hpfm_dashboard_card
                    WHERE
                    enabled_flag = 1
                    AND tenant_id = 0
                    AND CODE NOT LIKE 'TEST%'
                    )
                </sql>
                <id>id</id>
                <unique>role_id,card_id</unique>
                <reference>
                    <field>role_id</field>
                    <sheetName>iam_role_permission</sheetName>
                    <tableName>iam_role</tableName>
                    <columnName>id</columnName>
                </reference>
                <reference>
                    <field>card_id</field>
                    <tableName>hpfm_dashboard_card</tableName>
                    <columnName>id</columnName>
                </reference>
            </table>
            <table name="hpfm_dashboard_tenant_card" description="租户卡片分配">
                <sql>
                    SELECT
                    id,
                    tenant_id,
                    card_id
                    FROM
                    hpfm_dashboard_tenant_card
                    WHERE
                    tenant_id = 0
                    AND card_id IN (
                    SELECT
                    id
                    FROM
                    hpfm_dashboard_card
                    WHERE
                    enabled_flag = 1
                    AND CODE NOT LIKE 'TEST%'
                    )
                </sql>
                <id>id</id>
                <unique>tenant_id,card_id</unique>
                <reference>
                    <field>card_id</field>
                    <tableName>hpfm_dashboard_card</tableName>
                    <columnName>id</columnName>
                </reference>
            </table>
        </sheet>
    </excel>

    <excel name="hzero-platform-lov" description="值集数据" fileName="hzero-platform-lov" schema="hzero_platform">
        <sheet name="lov" description="值集数据">
            <table name="hpfm_lov" description="LOV表">
                <sql>SELECT
                    lov_id,
                    lov_code,
                    lov_type_code,
                    route_name,
                    lov_name,
                    description,
                    tenant_id,
                    parent_lov_code,
                    parent_tenant_id,
                    custom_sql,
                    custom_url,
                    value_field,
                    display_field,
                    must_page_flag,
                    enabled_flag,
                    translation_sql
                    FROM
                    hpfm_lov
                    WHERE
                    enabled_flag = 1
                    AND tenant_id = 0
                    AND (
                    lov_code LIKE 'HPFM.%'
                    OR lov_code LIKE 'HIAM.%'
                    OR lov_code LIKE 'HOTH.%'
                    OR lov_code LIKE 'HADM.%'
                    OR lov_code LIKE 'API.%'
                    )
                </sql>
                <id>lov_id</id>
                <cited>lov_id</cited>
                <unique>lov_code,tenant_id</unique>
                <lang>
                    <field>lov_name</field>
                    <pkName>lov_id</pkName>
                </lang>
                <lang>
                    <field>description</field>
                    <pkName>lov_id</pkName>
                </lang>
            </table>
            <table name="hpfm_lov_value" description="LOV独立值集表">
                <sql>SELECT
                    lov_value_id,
                    lov_id,
                    lov_code,
                    value,
                    meaning,
                    description,
                    tenant_id,
                    tag,
                    order_seq,
                    parent_value,
                    start_date_active,
                    end_date_active,
                    enabled_flag
                    FROM
                    hpfm_lov_value
                    WHERE
                    enabled_flag = 1
                    AND tenant_id = 0
                    AND (
                    lov_code LIKE 'HPFM.%'
                    OR lov_code LIKE 'HIAM.%'
                    OR lov_code LIKE 'HOTH.%'
                    OR lov_code LIKE 'HADM.%'
                    OR lov_code LIKE 'API.%')
                </sql>
                <id>lov_value_id</id>
                <unique>lov_id,value,tenant_id,parent_value</unique>
                <lang>
                    <field>meaning</field>
                    <pkName>lov_value_id</pkName>
                </lang>
                <lang>
                    <field>description</field>
                    <pkName>lov_value_id</pkName>
                </lang>
                <type>
                    <field>start_date_active</field>
                    <type>DATE</type>
                </type>
                <type>
                    <field>end_date_active</field>
                    <type>DATE</type>
                </type>
                <reference>
                    <field>lov_id</field>
                    <tableName>hpfm_lov</tableName>
                    <columnName>lov_id</columnName>
                </reference>
            </table>
            <table name="hpfm_lov_view_header" description="值集查询视图头表">
                <sql>SELECT
                    view_header_id,
                    view_code,
                    view_name,
                    lov_id,
                    tenant_id,
                    value_field,
                    display_field,
                    title,
                    width,
                    height,
                    page_size,
                    delay_load_flag,
                    children_field_name,
                    enabled_flag
                    FROM
                    hpfm_lov_view_header
                    WHERE
                    enabled_flag = 1
                    AND tenant_id = 0
                    AND (
                    view_code LIKE 'HPFM.%'
                    OR view_code LIKE 'HIAM.%'
                    OR view_code LIKE 'HOTH.%'
                    OR view_code LIKE 'HADM.%'
                    )
                </sql>
                <id>view_header_id</id>
                <cited>view_header_id</cited>
                <unique>view_code,tenant_id</unique>
                <lang>
                    <field>view_name</field>
                    <pkName>view_header_id</pkName>
                </lang>
                <lang>
                    <field>title</field>
                    <pkName>view_header_id</pkName>
                </lang>
                <reference>
                    <field>lov_id</field>
                    <tableName>hpfm_lov</tableName>
                    <columnName>lov_id</columnName>
                </reference>
            </table>
            <table name="hpfm_lov_view_line" description="值集查询视图行表">
                <sql>SELECT
                    view_line_id,
                    view_header_id,
                    tenant_id,
                    lov_id,
                    display,
                    order_seq,
                    field_name,
                    query_field_flag,
                    table_field_flag,
                    table_field_width,
                    enabled_flag
                    FROM
                    hpfm_lov_view_line
                    WHERE
                    enabled_flag = 1
                    AND tenant_id =0
                </sql>
                <id>view_line_id</id>
                <cited>view_line_id</cited>
                <unique>view_header_id,field_name</unique>
                <lang>
                    <field>display</field>
                    <pkName>view_line_id</pkName>
                </lang>
                <reference>
                    <field>view_header_id</field>
                    <tableName>hpfm_lov_view_header</tableName>
                    <columnName>view_header_id</columnName>
                </reference>
                <reference>
                    <field>lov_id</field>
                    <tableName>hpfm_lov</tableName>
                    <columnName>lov_id</columnName>
                </reference>
            </table>
        </sheet>
    </excel>

    <excel name="hzero-prompt" description="多语言" fileName="hzero-prompt" schema="hzero_platform">
        <!--name：名称，description：页面显示名称和Excel页名称-->
        <sheet name="prompt" description="多语言数据">
            <!--name：表名，description：描述-->
            <table name="hpfm_prompt" description="多语言配置">
                <!--sql语句，包含需要查询的字段和where条件，主表别名为 t -->
                <sql>SELECT
                    prompt_id,
                    tenant_id,
                    prompt_key,
                    prompt_code,
                    lang,
                    description
                    FROM
                    hpfm_prompt
                    WHERE
                    tenant_id = 0
                    AND (
                    prompt_key LIKE 'hiam%'
                    OR prompt_key LIKE 'hpfm.%'
                    OR prompt_key LIKE 'hoth.%'
                    OR prompt_key LIKE 'hadm.%'
                    OR prompt_key LIKE 'hzero.%'
                    )
                    AND lang != 'ja_JP'
                </sql>
                <!--主键，默认自增，保持原ID只需加个*号，例如 <id>*tenant_id</id> -->
                <id>prompt_id</id>>
                <!--唯一性索引-->
                <unique>tenant_id,prompt_key,prompt_code,lang</unique>
            </table>
        </sheet>
    </excel>
    <excel name="hzero-platform-permission-range" description="数据权限" fileName="hzero-platform-permission-range"
           schema="hzero_platform">
        <sheet name="permission" description="屏蔽规则">
            <table name="hpfm_permission_rule" description="屏蔽规则">
                <sql>SELECT
                    rule_id,
                    rule_code,
                    rule_type_code,
                    rule_name,
                    description,
                    sql_value,
                    tenant_id,
                    enabled_flag
                    FROM
                    hpfm_permission_rule
                    WHERE
                    enabled_flag = 1
                    AND tenant_id = 0
                    AND rule_id IN (
                    SELECT
                    rule_id
                    FROM
                    hpfm_permission_rel
                    WHERE
                    range_id IN ( SELECT range_id FROM hpfm_permission_range WHERE tenant_id = 0 AND enabled_flag = 1 AND ( service_name IS NULL OR service_name = 'hzero-platform' ) ))
                </sql>
                <id>rule_id</id>
                <cited>rule_id</cited>
                <unique>rule_code,tenant_id</unique>
            </table>
            <table name="hpfm_permission_range" description="屏蔽范围">
                <sql>SELECT
                    range_id,
                    custom_rule_flag,
                    table_name,
                    sql_id,
                    description,
                    tenant_id,
                    service_name,
                    enabled_flag
                    FROM
                    hpfm_permission_range
                    WHERE
                    enabled_flag = 1
                    AND tenant_id = 0
                    AND ( service_name IS NULL OR service_name = 'hzero-platform' )
                </sql>
                <id>range_id</id>
                <cited>range_id</cited>
                <unique>table_name,sql_id,tenant_id,service_name</unique>
            </table>
            <table name="hpfm_permission_rel" description="屏蔽范围规则关系">
                <sql>SELECT
                    permission_rel_id,
                    range_id,
                    rule_id,
                    editable_flag
                    FROM
                    hpfm_permission_rel
                    WHERE
                    range_id IN (
                    SELECT
                    range_id
                    FROM
                    hpfm_permission_range
                    WHERE
                    enabled_flag = 1
                    AND tenant_id = 0
                    AND ( service_name IS NULL OR service_name = 'hzero-platform' )
                    )
                </sql>
                <id>permission_rel_id</id>
                <cited>permission_rel_id</cited>
                <unique>range_id,rule_id</unique>
                <reference>
                    <field>range_id</field>
                    <tableName>hpfm_permission_range</tableName>
                    <columnName>range_id</columnName>
                </reference>
                <reference>
                    <field>rule_id</field>
                    <tableName>hpfm_permission_rule</tableName>
                    <columnName>rule_id</columnName>
                </reference>
            </table>
        </sheet>
    </excel>
    <excel name="hzero-platform-code-rule" description="编码规则" fileName="hzero-platform-code-rule"
           schema="hzero_platform">
        <sheet name="code-rule" description="编码规则数据">
            <table name="hpfm_code_rule" description="编码规则头">
                <sql>SELECT
                    rule_id,
                    rule_code,
                    rule_name,
                    rule_level,
                    tenant_id,
                    description
                    FROM
                    hpfm_code_rule
                    WHERE
                    tenant_id = 0
                    AND (
                    rule_code LIKE 'HPFM%'
                    OR rule_code LIKE 'HIAM%'
                    OR rule_code LIKE 'HOTH%'
                    OR rule_code LIKE 'HADM%')
                </sql>
                <id>rule_id</id>
                <cited>rule_id</cited>
                <unique>rule_code,tenant_id</unique>
            </table>
            <table name="hpfm_code_rule_dist" description="编码规则分配">
                <sql>SELECT
                    rule_dist_id,
                    rule_id,
                    level_code,
                    level_value,
                    used_flag,
                    enabled_flag,
                    description
                    FROM
                    hpfm_code_rule_dist
                    WHERE
                    enabled_flag = 1
                    AND rule_id IN (
                    SELECT
                    rule_id
                    FROM
                    hpfm_code_rule
                    WHERE
                    tenant_id = 0
                    AND (
                    rule_code LIKE 'HPFM%'
                    OR rule_code LIKE 'HIAM%'
                    OR rule_code LIKE 'HOTH%'
                    OR rule_code LIKE 'HADM%'))
                </sql>
                <id>rule_dist_id</id>
                <cited>rule_dist_id</cited>
                <unique>rule_id,level_code,level_value</unique>
                <reference>
                    <field>rule_id</field>
                    <tableName>hpfm_code_rule</tableName>
                    <columnName>rule_id</columnName>
                </reference>
            </table>
            <table name="hpfm_code_rule_detail" description="编码规则明细">
                <sql>SELECT
                    rule_detail_id,
                    rule_dist_id,
                    order_seq,
                    field_type,
                    field_value,
                    date_mask,
                    seq_length,
                    start_value,
                    current_value,
                    reset_frequency,
                    reset_date,
                    encrypted_flag
                    FROM
                    hitf_interface_server
                </sql>
                <id>rule_detail_id</id>
                <unique>
                    rule_dist_id,order_seq
                </unique>
                <type>
                    <field>reset_date</field>
                    <type>DATE</type>
                </type>
                <reference>
                    <field>rule_dist_id</field>
                    <tableName>hpfm_code_rule_dist</tableName>
                    <columnName>rule_dist_id</columnName>
                </reference>
            </table>
        </sheet>
    </excel>

    <excel name="hzero-platform-language" description="语言" fileName="hzero-platform-language" schema="hzero_platform">
        <sheet name="language" description="语言">
            <table name="fd_language" description="">
                <sql>SELECT
                    id,
                    code,
                    name,
                    description
                    FROM
                    fd_language
                    WHERE
                    1=1
                </sql>
                <id>id</id>
                <unique>code</unique>
                <lang>
                    <field>description</field>
                    <pkName>id</pkName>
                </lang>
            </table>
        </sheet>
    </excel>

    <excel name="hzero-platform-static-text" description="静态文本" fileName="hzero-platform-static-text"
           schema="hzero_platform">
        <sheet name="static-text" description="静态文本数据">
            <table name="hpfm_static_text" description="平台静态信息">
                <sql>SELECT
                    text_id,
                    text_code,
                    title,
                    description,
                    parent_id,
                    start_date,
                    end_date,
                    parent_ids,
                    tenant_id,
                    company_id
                    FROM
                    hpfm_static_text
                    WHERE
                    tenant_id = 0
                    AND text_code = "HPFM.TEMPLATE_CONFIG"
                </sql>
                <id>text_id</id>
                <cited>text_id</cited>
                <type>
                    <field>start_date</field>
                    <type>DATE</type>
                </type>
                <type>
                    <field>end_date</field>
                    <type>DATE</type>
                </type>
                <unique>text_code,parent_id,tenant_id</unique>
                <reference>
                    <field>parent_id</field>
                    <tableName>hpfm_static_text</tableName>
                    <columnName>text_id</columnName>
                </reference>
            </table>
            <table name="hpfm_static_text_value" description="平台静态信息值">
                <sql>SELECT
                    text_value_id,
                    text_id,
                    lang,
                    title,
                    description,
                    text
                    FROM
                    hpfm_static_text_value
                </sql>
                <id>text_value_id</id>
                <unique>text_id,lang</unique>
                <reference>
                    <field>text_id</field>
                    <tableName>hpfm_static_text</tableName>
                    <columnName>text_id</columnName>
                </reference>
            </table>
        </sheet>
    </excel>

    <excel name="hzero-platform-org" description="组织数据" fileName="hzero-platform-org" schema="hzero_platform">
        <sheet name="tenant" description="组织信息">
            <table name="hpfm_tenant" description="租户信息">
                <sql>SELECT
                    tenant_id,
                    tenant_num,
                    tenant_name,
                    enabled_flag
                    FROM
                    hpfm_tenant
                    WHERE
                    enabled_flag=1
                    and tenant_id=0
                </sql>
                <id>*tenant_id</id>
                <unique>tenant_num</unique>
                <lang>
                    <field>tenant_name</field>
                    <pkName>tenant_id</pkName>
                </lang>
            </table>
            <table name="hpfm_group" description="集团信息">
                <sql>SELECT
                    group_id,
                    group_num,
                    group_name,
                    tenant_id,
                    unit_id,
                    source_key,
                    source_code,
                    enabled_flag,
                    core_flag
                    FROM
                    hpfm_group
                    WHERE
                    enabled_flag=1
                    and tenant_id=0
                </sql>
                <id>group_id</id>
                <unique>group_num,tenant_id</unique>
            </table>
            <table name="hpfm_tenant_config" description="租户配置表">
                <sql>SELECT
                    tenant_config_id,
                    tenant_id,
                    config_key,
                    config_value
                    FROM
                    hpfm_tenant_config
                    WHERE
                    tenant_id=0
                </sql>
                <id>tenant_config_id</id>
                <unique>tenant_id,config_key</unique>
            </table>
        </sheet>
    </excel>

    <excel name="hzero-platform-oauth" description="OAuth数据" fileName="hzero-platform-oauth" schema="hzero_platform">
        <sheet name="oauth_client" description="客户端">
            <table name="oauth_client" description="客户端">
                <sql>SELECT
                    id,
                    name,
                    organization_id,
                    resource_ids,
                    secret,
                    scope,
                    authorized_grant_types,
                    web_server_redirect_uri,
                    access_token_validity,
                    refresh_token_validity,
                    additional_information,
                    auto_approve,
                    enabled_flag,
                    access_roles,
                    pwd_replay_flag,
                    time_zone
                    FROM
                    oauth_client
                    WHERE
                    organization_id = 0
                    AND enabled_flag = 1
                    AND name NOT LIKE '%test%'
                    AND name NOT LIKE '%TEST%'
                </sql>
                <id>id</id>
                <unique>name</unique>
            </table>
        </sheet>
        <sheet name="oauth_ldap" description="LDAP">
            <table name="oauth_ldap" description="LDAP">
                <sql>SELECT
                    id,
                    name,
                    organization_id,
                    server_address,
                    port,
                    account,
                    ldap_password,
                    use_ssl,
                    is_enabled,
                    base_dn,
                    directory_type,
                    object_class,
                    custom_filter,
                    saga_batch_size,
                    connection_timeout,
                    uuid_field,
                    login_name_field,
                    real_name_field,
                    email_field,
                    phone_field
                    FROM
                    oauth_ldap
                    WHERE
                    organization_id = 0
                    AND is_enabled = 1
                </sql>
                <id>id</id>
                <unique>organization_id</unique>
            </table>
        </sheet>
        <sheet name="oauth_password_policy" description="安全策略">
            <table name="oauth_password_policy" description="安全策略">
                <sql>SELECT
                    id,
                    code,
                    name,
                    organization_id,
                    original_password,
                    min_length,
                    max_length,
                    max_error_time,
                    digits_count,
                    lowercase_count,
                    uppercase_count,
                    special_char_count,
                    not_username,
                    regular_expression,
                    not_recent_count,
                    enable_password,
                    enable_security,
                    enable_lock,
                    locked_expire_time,
                    enable_captcha,
                    max_check_captcha,
                    enable_web_multiple_login,
                    enable_app_multiple_login,
                    password_update_rate,
                    password_reminder_period,
                    force_modify_password
                    FROM
                    oauth_password_policy
                    WHERE
                    organization_id = 0
                </sql>
                <id>id</id>
                <unique>organization_id</unique>
            </table>
        </sheet>
    </excel>

    <excel name="hzero-platform-form" description="表单配置" fileName="hzero-platform-form" schema="hzero_platform">
        <sheet name="from" description="表单配置">
            <table name="hpfm_form_header" description="表单配置头">
                <sql>SELECT
                    form_header_id,
                    form_code,
                    form_name,
                    form_group_code,
                    form_description,
                    enabled_flag,
                    tenant_id
                    FROM
                    hpfm_form_header
                    WHERE
                    enabled_flag = 1
                    AND tenant_id = 0
                    AND (form_code like "HPFM%" OR form_code like "HIAM%" OR form_code = "Redis")
                </sql>
                <id>form_header_id</id>
                <cited>form_header_id</cited>
                <unique>form_code,tenant_id</unique>
                <lang>
                    <field>form_name</field>
                    <pkName>form_header_id</pkName>
                </lang>
                <lang>
                    <field>form_description</field>
                    <pkName>form_header_id</pkName>
                </lang>
            </table>
            <table name="hpfm_form_line" description="表单配置行">
                <sql>SELECT
                    form_line_id,
                    form_header_id,
                    item_code,
                    item_name,
                    item_description,
                    order_seq,
                    item_type_code,
                    required_flag,
                    updatable_flag,
                    default_value,
                    value_constraint,
                    enabled_flag,
                    tenant_id
                    FROM
                    hpfm_form_line
                    WHERE
                    enabled_flag = 1
                    AND tenant_id = 0
                </sql>
                <id>form_line_id</id>
                <unique>form_header_id,item_code,tenant_id</unique>
                <lang>
                    <field>item_name</field>
                    <pkName>form_line_id</pkName>
                </lang>
                <lang>
                    <field>item_description</field>
                    <pkName>form_line_id</pkName>
                </lang>
                <reference>
                    <field>form_header_id</field>
                    <tableName>hpfm_form_header</tableName>
                    <columnName>form_header_id</columnName>
                </reference>
            </table>
        </sheet>
    </excel>

    <excel name="hzero-platform-config" description="系统配置" fileName="hzero-platform-config" schema="hzero_platform">
        <sheet name="system-config" description="系统配置">
            <table name="hpfm_config" description="系统配置">
                <sql>SELECT
                    config_id,
                    tenant_id,
                    config_code,
                    config_value,
                    category
                    FROM
                    hpfm_config
                    WHERE
                    tenant_id =0
                </sql>
                <id>config_id</id>
                <unique>tenant_id,config_code</unique>
            </table>
        </sheet>
    </excel>
</service>
